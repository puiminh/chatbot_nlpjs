<html>
<head>
  <title>Test</title>
</head>
<body>
    <p>B1: Them cac ngu canh</p>
    <p>B2: Chay npm run browserdist</p>
    <p>B3: Load lai web</p>

    <p>Testing here...</p>
    <input id="input" type="text">
    <p id="output">...</p>    


</body>
<script src='./bundle.js'></script>
<script>
const { containerBootstrap, Nlp, LangEn } = window.nlpjs;

var input = document.getElementById("input");
var output = document.getElementById("output");

// Execute a function when the user presses a key on the keyboard
input.addEventListener("keypress", function(event) {
  // If the user presses the "Enter" key on the keyboard
  if (event.key === "Enter") {
    // Cancel the default action, if needed
    event.preventDefault();
    // Trigger the button element with a click
    process(input.value).then((e)=> {
        output.textContent = e;
    })
  }
});

const process = async(input_text) => {

  console.log(input_text);

  const container = await containerBootstrap();
  container.use(Nlp);
  container.use(LangEn);
  const nlp = container.get('nlp');
  nlp.settings.autoSave = false;
  nlp.addLanguage('en');
  // Adds the utterances and intents for the NLP
  nlp.addDocument('en', 'goodbye for now', 'greetings.bye');
  nlp.addDocument('en', 'bye bye take care', 'greetings.bye');
  nlp.addDocument('en', 'okay see you later', 'greetings.bye');
  nlp.addDocument('en', 'bye for now', 'greetings.bye');
  nlp.addDocument('en', 'i must go', 'greetings.bye');
  nlp.addDocument('en', 'hello', 'greetings.hello');
  nlp.addDocument('en', 'hi', 'greetings.hello');
  nlp.addDocument('en', 'howdy', 'greetings.hello');
  nlp.addDocument('en', 'soccer', 'sport.football');
  nlp.addDocument('en', 'football', 'sport.football');
  nlp.addDocument('en', 'ball', 'sport.football');
  

  nlp.addDocument('en', 'karate', 'sport.karate');
  nlp.addDocument('en', 'karatedo', 'sport.karate');

  nlp.addDocument('en', 'howdy', 'greetings.hello');

  
  // Train also the NLG
  nlp.addAnswer('en', 'greetings.bye', 'Till next time');
  nlp.addAnswer('en', 'greetings.bye', 'see you soon!');
  nlp.addAnswer('en', 'greetings.hello', 'Hey there!');
  nlp.addAnswer('en', 'greetings.hello', 'Greetings!');
  nlp.addAnswer('en', 'sport.football', 'I like kicking ball too!');
  nlp.addAnswer('en', 'sport.karate', 'Bruce Lee!');

  await nlp.train();
  const response = await nlp.process('en', input_text);
  console.log(response);
  return response.answer   
}


</script>
</html>